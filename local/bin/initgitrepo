#!/bin/bash
#
# Written by Yasuharu Mizutani.
# Modified by Hiroshi Igaki

usage(){
    cat <<-EOF
	
	使い方:
	    initgitrepo
	
	/home 以下に local, etc,及びホーム以下の設定ファイルを取得するためのリポジトリを作成する
	
	EOF
}

GB='\e[1;32m'
GE='\e[m'
RB='\e[1;31m'
RE='\e[m'

if [ "$#" -ge 1 ]; then
    case "$1" in
        -h|-help|--help)
            usage
            exit 0
            ;;
        *)
            usage
            exit 1
            ;;
    esac
fi

if [ -d /home/${CLASSNAME} ]; then
  rm -rf /home/${CLASSNAME}
fi

mkdir -p /home/${CLASSNAME}
cd /home/${CLASSNAME}
git init
git config core.sparsecheckout true
git remote add origin https://github.com/igakilab/${CLASSNAME}.git
echo $COURSEYEAR > .git/info/sparse-checkout
echo local >> .git/info/sparse-checkout
echo etc >> .git/info/sparse-checkout

echo "環境更新用リポジトリを取得します"
git pull origin master

exit $?